class sesmMain{sesm_do="";construct(){jQuery(document).ready((async function(){await import("./modules/ajax.js").then(module=>{sesm_scripts.ajax=new module.SesmAjax}),await import("./modules/template.js").then(module=>{sesm_scripts.template=new module.SesmTemplate}),await sesm_scripts.template.load_default_templates(),sesm_scripts.add_event_listener(),sesm_scripts.activate_sesm()}))}add_event_listener(){jQuery("#sesm_buttons span").click((function(){sesm_scripts.sesm_do=jQuery(this).data("do"),jQuery("#sesm_input input").hide(),jQuery("#sesm_input label").hide(),jQuery("#sesm_input .quant_flex_group").hide(),jQuery("#sesm_sku_input").show(),jQuery("[for=sesm_sku_input]").show(),jQuery("#sesm_sku_input").focus(),jQuery(".sesm_input."+sesm_scripts.sesm_do).show(),jQuery(".sesm_label."+sesm_scripts.sesm_do).show(),jQuery("#sesm_buttons span.current").removeClass("current"),jQuery(this).addClass("current")})),jQuery(document).on("keyup",(function(s){13==s.which&&(sesm_scripts.ajax.do_ajax(),jQuery("#sesm_sku_input").val(""))})),jQuery("#add_quant_btn").click((function(){changeQuantity(!0)})),jQuery("#remove_quant_btn").click((function(){changeQuantity(!1)}))}activate_sesm(){jQuery("#sesm_buttons").show("slow")}addToHistory(json_data){var template=sesm_scripts.template.loaded_templates.item;"error"===json_data.template&&(json_data.title=__("Error","sesm"),template=sesm_scripts.template.loaded_templates.error),this.empty(template)&&jQuery("#sesm_history").prepend(__(`Template "${json_data.template}" not loaded`,"sesm")),jQuery.each(json_data,(function(key,value){value=sesm_scripts.colorValues(key,value),template=template.replaceAll("{{"+key+"}}",value)})),jQuery("#sesm_history").addClass("active"),jQuery("#sesm_history").prepend(template)}colorValues(template_name,value){switch(template_name){case"stock_quantity":case"regular_price":case"sale_price":var number=parseInt(value);return number<1?"<span class='red'>"+number+"</span>":value;default:return value}}empty(value){return null===value||(void 0===value||0===value.length)}}const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;let sesm_scripts=new sesmMain;sesm_scripts.construct();